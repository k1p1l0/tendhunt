---
phase: 14-buyer-explorer-filters-data-visibility
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/buyers/buyer-table.tsx
  - src/components/buyers/buyer-header.tsx
  - src/components/buyers/buyer-detail-client.tsx
  - src/components/buyers/buyer-tabs.tsx
  - src/components/buyers/contacts-tab.tsx
  - src/components/buyers/contact-card.tsx
autonomous: true

must_haves:
  truths:
    - "Buyer table no longer shows Locked/Unlocked status column"
    - "Buyer detail page shows contacts without blur or unlock button"
    - "BuyerTable shows new columns: Org Type (badge), Enrichment Score, Website (link)"
    - "Contact cards display email and phone without blur effect"
  artifacts:
    - path: "src/components/buyers/buyer-table.tsx"
      provides: "Updated table with orgType, enrichmentScore, website columns; no Status column"
    - path: "src/components/buyers/contact-card.tsx"
      provides: "Contact cards always showing all data, no blur"
    - path: "src/components/buyers/contacts-tab.tsx"
      provides: "Contacts tab without unlock button"
    - path: "src/components/buyers/buyer-detail-client.tsx"
      provides: "Simplified wrapper without isUnlocked state"
  key_links:
    - from: "src/components/buyers/buyer-table.tsx"
      to: "BuyerRow interface"
      via: "orgType, enrichmentScore, website fields"
      pattern: "orgType.*enrichmentScore.*website"
    - from: "src/components/buyers/contacts-tab.tsx"
      to: "ContactCard"
      via: "always isUnlocked=true or removed prop"
      pattern: "ContactCard"
---

<objective>
Remove all credit-gating UI from the buyers page and detail page. Remove the Locked/Unlocked status column from BuyerTable. Remove blur effects from contact cards. Remove the UnlockButton from contacts tab. Simplify BuyerDetailClient by removing isUnlocked state management. Add new data columns to BuyerTable: Org Type (as a badge), Enrichment Score (number), and Website (clickable link).

Purpose: Show all buyer data freely without credit gating, and surface enrichment data in the table.
Output: Updated buyer-table.tsx, contact-card.tsx, contacts-tab.tsx, buyer-detail-client.tsx, buyer-header.tsx, buyer-tabs.tsx.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@src/components/buyers/buyer-table.tsx
@src/components/buyers/buyer-header.tsx
@src/components/buyers/buyer-detail-client.tsx
@src/components/buyers/buyer-tabs.tsx
@src/components/buyers/contacts-tab.tsx
@src/components/buyers/contact-card.tsx
@src/components/buyers/unlock-button.tsx (reference only -- will be orphaned)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update BuyerTable with new columns, remove Status column</name>
  <files>src/components/buyers/buyer-table.tsx</files>
  <action>
  Update the `BuyerRow` interface to add:
  - `orgType?: string`
  - `enrichmentScore?: number`
  - `website?: string`

  Remove `isUnlocked: boolean` from BuyerRow.

  Update the `columns` array -- remove the hardcoded Status column from the JSX. Add new columns after Region:
  - `{ key: "orgType", label: "Org Type" }` (sortable)
  - `{ key: "enrichmentScore", label: "Score" }` (sortable)

  Update the `SortColumn` type to include `"orgType"` and `"enrichmentScore"`.

  Update the table body to render new columns:
  - **Org Type**: Use the `orgTypeLabel()` function (copy from buyer-header.tsx) to convert `orgType` slug to human-readable label. Render as `<Badge variant="outline">` when present, `--` when null.
  - **Enrichment Score**: Show the number (0-100) when present, `--` when null. If present, style with color: green text for >= 70, yellow/amber for >= 40, red for < 40. Use a simple `<span>` with conditional text color class.
  - **Website**: Render as a clickable `<a>` link with ExternalLink icon. Show domain only (strip https:// prefix) for compact display. `--` when null.

  Remove the Status column (`<TableHead>Status</TableHead>` and its `<TableCell>`) entirely.
  Remove the `Contacts` column (`<TableHead>Contacts</TableHead>` and its `<TableCell>`) -- contacts count is not useful without credit gating.

  Remove imports for `Lock`, `Unlock` from lucide-react. Add import for `ExternalLink`.

  Keep Organization, Sector, Region, Contracts columns as-is.
  </action>
  <verify>Run `npx tsc --noEmit` to verify no type errors. Visually inspect that the file has 7 columns: Organization, Sector, Region, Contracts, Org Type, Score, Website.</verify>
  <done>BuyerTable renders orgType badge, enrichment score with color, and website link columns. No Status or Contacts columns.</done>
</task>

<task type="auto">
  <name>Task 2: Remove credit gating from buyer detail page components</name>
  <files>src/components/buyers/buyer-detail-client.tsx, src/components/buyers/buyer-tabs.tsx, src/components/buyers/contacts-tab.tsx, src/components/buyers/contact-card.tsx, src/components/buyers/buyer-header.tsx</files>
  <action>
  **contact-card.tsx:**
  - Remove `isUnlocked` from the `ContactCardProps` interface
  - Remove all `isUnlocked` conditional logic: the blur-sm class, select-none, pointer-events-none, aria-hidden
  - Always show email and phone text without blur
  - Always render the CopyButton for email and phone (previously gated on isUnlocked)
  - Remove the `cn` import if no longer needed (check if used elsewhere in the file)

  **contacts-tab.tsx:**
  - Remove `isUnlocked` and `onUnlocked` from `ContactsTabProps`
  - Remove `buyerId` from `ContactsTabProps` (no longer needed for unlock)
  - Remove the `UnlockButton` component and its import
  - Remove the header div with count + unlock button; just show the count text above the grid
  - Pass contacts to `ContactCard` without `isUnlocked` prop

  **buyer-tabs.tsx:**
  - Remove `isUnlocked`, `buyerId`, and `onUnlocked` from `BuyerTabsProps`
  - Remove these props from the `ContactsTab` usage
  - Keep buyerName in props (used elsewhere or may be useful)

  **buyer-detail-client.tsx:**
  - Remove the `useState` for `isUnlocked` and the `handleUnlocked` function
  - Remove `isUnlocked` from BuyerHeader props (remove from the buyer object passed to BuyerHeader)
  - Remove `isUnlocked`, `buyerId`, `onUnlocked` from BuyerTabs props
  - The component becomes a simple pass-through wrapper (still useful for client-side interactivity if needed later)

  **buyer-header.tsx:**
  - Remove `isUnlocked` from `BuyerHeaderProps.buyer` interface
  - Remove the Unlocked badge (`buyer.isUnlocked && <Badge>...Unlocked</Badge>`)
  - Remove the `Unlock` import from lucide-react
  </action>
  <verify>Run `npx tsc --noEmit` to verify no type errors across all modified files. Grep for "isUnlocked" in src/components/buyers/ to confirm it's fully removed from all buyer components.</verify>
  <done>All buyer components show data freely. No blur effects, no unlock button, no locked/unlocked badges. Contact cards always show full details with copy buttons.</done>
</task>

</tasks>

<verification>
- `npx tsc --noEmit` passes with no errors
- `grep -r "isUnlocked" src/components/buyers/` returns no matches (except possibly in types that reference the API response, which is fine if unused)
- `grep -r "UnlockButton" src/components/buyers/` returns no matches in active components (unlock-button.tsx file itself still exists but is orphaned)
- BuyerTable has 7 columns: Organization, Sector, Region, Contracts, Org Type, Score, Website
- Contact cards show email/phone without blur
</verification>

<success_criteria>
Credit gating is fully removed from all buyer UI components. BuyerTable shows enrichment data columns (orgType badge, score with color, website link). Contacts are displayed freely without blur or unlock flow.
</success_criteria>

<output>
After completion, create `.planning/phases/14-buyer-explorer-filters-data-visibility/14-02-SUMMARY.md`
</output>
