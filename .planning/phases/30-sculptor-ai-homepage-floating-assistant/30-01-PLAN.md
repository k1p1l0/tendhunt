---
phase: 30-sculptor-ai-homepage-floating-assistant
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/src/components/sculptor/sculptor-icon.tsx
  - apps/web/src/components/sculptor/floating-bubble.tsx
  - apps/web/src/app/globals.css
  - apps/web/src/app/(dashboard)/layout.tsx
  - apps/web/src/components/layout/header.tsx
  - apps/web/src/components/layout/app-sidebar.tsx
  - apps/web/src/components/agent/agent-panel.tsx
  - apps/web/src/components/agent/agent-panel-header.tsx
autonomous: true

must_haves:
  truths:
    - "Sculptor starburst icon renders at multiple sizes with dark mode support (dark:invert)"
    - "Starburst icon has subtle idle rotation animation (CSS keyframes, ~12s period)"
    - "Animation respects prefers-reduced-motion media query"
    - "Floating bubble appears fixed bottom-right on non-dashboard pages"
    - "Floating bubble is hidden on /dashboard and when AgentPanel is open"
    - "Clicking bubble opens the existing AgentPanel Sheet"
    - "Bubble has enter/exit animation via AnimatePresence"
    - "All references to 'Research Agent' and 'Chat with AI' renamed to 'Sculptor'"
  artifacts:
    - path: "apps/web/src/components/sculptor/sculptor-icon.tsx"
      provides: "Reusable animated starburst icon component"
      exports: ["SculptorIcon"]
    - path: "apps/web/src/components/sculptor/floating-bubble.tsx"
      provides: "Floating action button with pathname awareness"
      exports: ["FloatingBubble"]
    - path: "apps/web/src/app/globals.css"
      provides: "CSS keyframes for sculptor-rotate animation"
      contains: "sculptor-rotate"
  key_links:
    - from: "apps/web/src/components/sculptor/floating-bubble.tsx"
      to: "apps/web/src/stores/agent-store.ts"
      via: "useAgentStore setPanelOpen"
      pattern: "useAgentStore.*setPanelOpen"
    - from: "apps/web/src/app/(dashboard)/layout.tsx"
      to: "apps/web/src/components/sculptor/floating-bubble.tsx"
      via: "FloatingBubble rendered alongside AgentPanel"
      pattern: "<FloatingBubble"
---

<objective>
Create the SculptorIcon reusable component, FloatingBubble fixed-position launcher, CSS animations, and rename all "Research Agent" / "Chat with AI" references to "Sculptor" across the app.

Purpose: Establishes the visual identity and non-homepage interaction pattern for the Sculptor AI assistant. The icon and bubble are prerequisites for both the homepage hero and the floating assistant on other pages.

Output: SculptorIcon component, FloatingBubble component, updated branding in header/sidebar/panel.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@apps/web/src/app/globals.css (agent-trigger CSS lines 169-233)
@apps/web/src/components/layout/header.tsx
@apps/web/src/components/layout/app-sidebar.tsx
@apps/web/src/components/agent/agent-panel.tsx
@apps/web/src/components/agent/agent-panel-header.tsx
@apps/web/src/stores/agent-store.ts
@apps/web/src/app/(dashboard)/layout.tsx
@apps/web/public/sculptor.png (black monochrome starburst icon)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create SculptorIcon component and CSS animation</name>
  <files>
    apps/web/src/components/sculptor/sculptor-icon.tsx
    apps/web/src/app/globals.css
  </files>
  <action>
    Create `apps/web/src/components/sculptor/sculptor-icon.tsx`:
    - "use client" component using next/image to render `/sculptor.png`
    - Props: `size?: number` (default 24), `animate?: boolean` (default false), `className?: string`
    - Apply `dark:invert` class for dark mode visibility (PNG is black on transparent)
    - When `animate` is true, apply CSS class `sculptor-icon-animated` for continuous rotation
    - Use `priority={size > 40}` on the Image for hero-sized icons
    - Set `aria-hidden="true"` and `alt=""` since it's decorative
    - Import `cn` from `@/lib/utils` for class merging

    Add to `apps/web/src/app/globals.css` (after the existing agent-trigger section, before the closing reduced-motion block):
    - `@keyframes sculptor-rotate` animation: `to { transform: rotate(360deg); }` with 12s linear infinite duration
    - `.sculptor-icon-animated` class applying this animation
    - Add `.sculptor-icon-animated` to the existing `@media (prefers-reduced-motion: reduce)` block with `animation: none`
    - Also add `.sculptor-bubble-pulse` keyframes for a subtle scale pulse (1 -> 1.04 -> 1) over 3s ease-in-out infinite, also disabled in reduced-motion
  </action>
  <verify>
    Run `pnpm typecheck` to ensure no TypeScript errors in the new component.
  </verify>
  <done>
    SculptorIcon component renders sculptor.png at configurable sizes with dark:invert and optional CSS rotation animation. CSS keyframes exist in globals.css with prefers-reduced-motion handling.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create FloatingBubble, integrate into layout, rename branding to Sculptor</name>
  <files>
    apps/web/src/components/sculptor/floating-bubble.tsx
    apps/web/src/app/(dashboard)/layout.tsx
    apps/web/src/components/layout/header.tsx
    apps/web/src/components/layout/app-sidebar.tsx
    apps/web/src/components/agent/agent-panel.tsx
    apps/web/src/components/agent/agent-panel-header.tsx
  </files>
  <action>
    **FloatingBubble component** (`apps/web/src/components/sculptor/floating-bubble.tsx`):
    - "use client" component
    - Uses `usePathname()` from next/navigation to detect `/dashboard` route
    - Uses `useAgentStore((s) => s.panelOpen)` to detect when panel is open
    - Uses `useReducedMotion()` from `motion/react` for accessibility
    - Visible when: NOT on `/dashboard` AND panel is NOT open
    - Renders inside `<AnimatePresence>` with `motion.button`:
      - initial: `{ opacity: 0, scale: 0.5 }` (or `{ opacity: 1 }` if reduced motion)
      - animate: `{ opacity: 1, scale: 1 }`
      - exit: `{ opacity: 0, scale: 0.5 }`
      - transition: `{ type: "spring", visualDuration: 0.3, bounce: 0.3 }`
    - onClick: `useAgentStore.getState().setPanelOpen(true)`
    - Classes: `fixed bottom-6 right-6 z-40 h-14 w-14 rounded-full bg-background border shadow-lg flex items-center justify-center hover:shadow-xl transition-shadow min-h-[44px] min-w-[44px]`
    - Apply `sculptor-bubble-pulse` class on the button for idle breathing animation
    - Renders `<SculptorIcon size={28} />` inside (no animate prop -- bubble itself pulses)
    - `aria-label="Open Sculptor assistant"`

    **Layout integration** (`apps/web/src/app/(dashboard)/layout.tsx`):
    - Import `FloatingBubble` from `@/components/sculptor/floating-bubble`
    - Add `<FloatingBubble />` right after `<AgentPanel />` inside the AgentProvider

    **Header rename** (`apps/web/src/components/layout/header.tsx`):
    - Change "Chat with AI" text to "Sculptor"
    - Change `aria-label` from "Open research agent (Cmd+K)" to "Open Sculptor (Cmd+K)"
    - Replace the `.agent-trigger-orb` span with `<SculptorIcon size={20} animate />` (import SculptorIcon)

    **Sidebar rename** (`apps/web/src/components/layout/app-sidebar.tsx`):
    - Change the "Research" text to "Sculptor" in the SidebarMenuButton

    **AgentPanel rename** (`apps/web/src/components/agent/agent-panel.tsx`):
    - Change `SheetTitle` from "Research Agent" to "Sculptor"

    **AgentPanelHeader rename** (`apps/web/src/components/agent/agent-panel-header.tsx`):
    - Change the h2 text from "Research Agent" to "Sculptor"
    - Replace the `.agent-trigger-orb` span with `<SculptorIcon size={24} animate />` (import SculptorIcon)
  </action>
  <verify>
    Run `pnpm typecheck` to verify no TypeScript errors across all modified files. Run `cd apps/web && bun run lint` to check for CI lint issues.
  </verify>
  <done>
    FloatingBubble renders on all non-dashboard pages with animated entry/exit. Clicking opens AgentPanel. All "Research Agent" and "Chat with AI" text is renamed to "Sculptor". Starburst icon replaces orb in header and panel header.
  </done>
</task>

</tasks>

<verification>
1. `pnpm typecheck` passes with no errors
2. `cd apps/web && bun run lint` passes with no errors
3. SculptorIcon component exports from sculptor-icon.tsx
4. FloatingBubble component exports from floating-bubble.tsx
5. No references to "Research Agent" or "Chat with AI" remain in header, sidebar, agent-panel, or agent-panel-header
6. globals.css contains sculptor-rotate and sculptor-bubble-pulse keyframes with reduced-motion handling
</verification>

<success_criteria>
- SculptorIcon component renders at sizes 20, 24, 28, 64 with dark mode invert support
- FloatingBubble shows on non-dashboard pages, hides when panel is open, opens panel on click
- All branding updated from "Research Agent" to "Sculptor"
- All animations respect prefers-reduced-motion
- No lint or typecheck errors
</success_criteria>

<output>
After completion, create `.planning/phases/30-sculptor-ai-homepage-floating-assistant/30-01-SUMMARY.md`
</output>
