---
phase: 17-dashboard-home
plan: 02
type: execute
wave: 2
depends_on: ["17-01"]
files_modified:
  - src/components/dashboard/saved-scanners-section.tsx
  - src/components/dashboard/fresh-signals-feed.tsx
  - src/app/(dashboard)/dashboard/page.tsx
autonomous: true

must_haves:
  truths:
    - "User sees their saved scanners with name, type badge, last activity time, and entity count"
    - "User sees a fresh signals feed showing top-scoring entities (>=7) from their scanners"
    - "Each signal item shows entity name, scanner name, score badge, column name, and reasoning excerpt"
    - "New user with no scanners sees an empty state with a CTA to create their first scanner"
    - "User with scanners but no high scores sees an empty state message in the signals feed"
    - "Scanner cards link to the scanner detail page when clicked"
  artifacts:
    - path: "src/components/dashboard/saved-scanners-section.tsx"
      provides: "Scanner summary cards with type badges and relative time"
      contains: "SavedScannersSection"
    - path: "src/components/dashboard/fresh-signals-feed.tsx"
      provides: "Aggregated top-score feed from user scanners"
      contains: "FreshSignalsFeed"
    - path: "src/app/(dashboard)/dashboard/page.tsx"
      provides: "Complete dashboard page with all 4 sections wired"
      contains: "SavedScannersSection"
  key_links:
    - from: "src/app/(dashboard)/dashboard/page.tsx"
      to: "src/components/dashboard/saved-scanners-section.tsx"
      via: "import + props (scanners array)"
      pattern: "SavedScannersSection.*scanners"
    - from: "src/app/(dashboard)/dashboard/page.tsx"
      to: "src/components/dashboard/fresh-signals-feed.tsx"
      via: "import + props (topScores array)"
      pattern: "FreshSignalsFeed.*signals"
    - from: "src/components/dashboard/saved-scanners-section.tsx"
      to: "/scanners/[id]"
      via: "Link component for scanner card navigation"
      pattern: "href.*scanners"
---

<objective>
Create the Saved Scanners and Fresh Signals feed components and wire them into the dashboard page, completing the personalized home experience.

Purpose: These two content sections are the core value of the new dashboard -- showing users their active scanners and surfacing high-value AI results in one place. Replaces the Plan 01 placeholder areas with real interactive content.
Output: Fully functional personalized dashboard with all 4 sections: AM card, saved scanners, fresh signals, and quick actions.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/17-dashboard-home/17-RESEARCH.md
@.planning/phases/17-dashboard-home/17-01-SUMMARY.md
@src/app/(dashboard)/dashboard/page.tsx
@src/lib/dashboard.ts
@src/components/scanners/scanner-list.tsx
@src/models/scanner.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Saved Scanners section and Fresh Signals feed components</name>
  <files>
    src/components/dashboard/saved-scanners-section.tsx
    src/components/dashboard/fresh-signals-feed.tsx
  </files>
  <action>
**saved-scanners-section.tsx** -- pure component (no "use client"):
- Import `Card`/`CardContent`/`CardHeader`/`CardTitle` from `@/components/ui/card`, `Badge` from `@/components/ui/badge`, `Button` from `@/components/ui/button`, `Link` from `next/link`, `Radar`/`Plus`/`ArrowRight` from `lucide-react`
- Import `ScannerSummary` type from `@/lib/dashboard`
- Define TYPE_CONFIG inline (same pattern as scanner-list.tsx): rfps = blue badge "RFPs", meetings = purple badge "Meetings", buyers = amber badge "Buyers" -- each with emoji, label, badgeClass
- Define `formatRelativeTime(date: Date | null): string` helper (same logic as scanner-list.tsx but accepting Date, not string): handles null -> "Never", then same min/hour/day/date logic
- Props: `{ scanners: ScannerSummary[] }`
- Section header: "Your Scanners" with Radar icon and a "View all" link to /scanners (using ArrowRight)
- **Empty state** (scanners.length === 0): Card with centered content -- Radar icon in primary/10 circle, "No scanners yet" heading, "Create your first scanner to start analyzing opportunities" description, and a `<Button asChild><Link href="/scanners">Create Scanner</Link></Button>` CTA
- **Scanner list** (scanners.length > 0): Render up to 5 scanners as compact cards in a `space-y-3` list. Each scanner card is a `<Link href={/scanners/${scanner._id}}>` wrapping a Card with:
  - Row layout: type badge (using TYPE_CONFIG badgeClass + emoji + label), scanner name (font-medium), spacer, relative time from updatedAt (text-sm text-muted-foreground)
  - Second row: description truncated to 1 line (line-clamp-1 text-sm text-muted-foreground), and "{totalEntries} entities" count on the right
  - Hover effect: `hover:bg-muted/50 transition-colors cursor-pointer`
- If more than 5 scanners, show a "View all {scanners.length} scanners" link at the bottom

**fresh-signals-feed.tsx** -- pure component (no "use client"):
- Import `Card`/`CardContent`/`CardHeader`/`CardTitle` from `@/components/ui/card`, `Sparkles`/`TrendingUp` from `lucide-react`, `Link` from `next/link`
- Import `TopScore` type from `@/lib/dashboard`
- Props: `{ signals: TopScore[] }`
- Section header: "Fresh Signals" with Sparkles icon, subtitle "Top AI matches from your scanners"
- **Empty state** (signals.length === 0): Card with centered content -- Sparkles icon in primary/10 circle, "No signals yet" heading, "Run your scanners to see top-scoring matches here" description
- **Signal list** (signals.length > 0): Render each signal as a row in a Card list:
  - Left: small colored score circle (green >= 8, yellow >= 7, matching the project's score badge convention but simplified -- just a `w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold` with bg-green-100/text-green-700 or bg-yellow-100/text-yellow-700)
  - Middle: entity name (font-medium text-sm), scanner name + column name below (text-xs text-muted-foreground)
  - Right: score value as text (e.g., "9.2")
  - Each row links to the scanner: `<Link href={/scanners/${signal.scannerId}}>`
  - Reasoning shown as a single-line excerpt below (line-clamp-1 text-xs text-muted-foreground italic)
- Render dividers between items using a subtle border-b on each item except the last
  </action>
  <verify>Run `npx tsc --noEmit` -- no type errors in either component file. Verify both export their main component.</verify>
  <done>Both components exist with proper TypeScript types, empty state handling, and consistent styling matching the project's design patterns.</done>
</task>

<task type="auto">
  <name>Task 2: Wire scanner and signal sections into dashboard page</name>
  <files>src/app/(dashboard)/dashboard/page.tsx</files>
  <action>
Update the dashboard page created in Plan 01:

1. Add imports for `SavedScannersSection` from `@/components/dashboard/saved-scanners-section` and `FreshSignalsFeed` from `@/components/dashboard/fresh-signals-feed`

2. Replace the placeholder Cards (the "Scanners section coming" and "Signals section coming" placeholders from Plan 01) with the real components:
   - `<SavedScannersSection scanners={scanners} />`
   - `<FreshSignalsFeed signals={topScores} />`

3. Ensure the left column order is:
   - Greeting (h1 + subtitle)
   - AccountManagerCard
   - SavedScannersSection
   - FreshSignalsFeed

4. Ensure the right column has:
   - QuickActions (sticky positioning: `className="lg:sticky lg:top-6"`)

5. Verify that the `Promise.all` in the page still fetches `[currentUser(), getUserScanners(userId), getTopScores(userId)]` -- no changes needed to data fetching from Plan 01.

6. Remove any placeholder text/cards that Plan 01 added as temporary content.
  </action>
  <verify>Run `npx tsc --noEmit` to confirm no type errors. Optionally run `npx next build` to verify the full build passes. Check that the dashboard route compiles without errors.</verify>
  <done>Dashboard page renders all 4 sections: greeting + AM card, saved scanners, fresh signals feed, and quick action links. Empty states display correctly for new users. Scanner cards link to scanner detail pages. Signal items show score badges and entity names.</done>
</task>

</tasks>

<verification>
- `npx tsc --noEmit` passes with no errors
- `src/components/dashboard/saved-scanners-section.tsx` renders scanner cards with type badges, relative time, and entity count
- `src/components/dashboard/fresh-signals-feed.tsx` renders score items with entity names and score circles
- Both components handle empty arrays with descriptive empty states and CTAs
- `src/app/(dashboard)/dashboard/page.tsx` imports and renders all 4 sections in the correct layout order
- No placeholder content remains from Plan 01
</verification>

<success_criteria>
- Saved Scanners section shows user's scanners with name, type badge (color-coded), last activity (relative time), entity count
- Scanner cards are clickable links to /scanners/[id]
- Empty state for zero scanners shows CTA to create first scanner
- Fresh Signals feed shows top-scoring entities (>=7) with score circle, entity name, scanner context, and reasoning excerpt
- Empty state for zero signals explains that user needs to run scanners
- Score circles use green (>=8) and yellow (>=7) color coding
- Dashboard page has all 4 sections wired and rendering in two-column layout
- TypeScript compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/17-dashboard-home/17-02-SUMMARY.md`
</output>
